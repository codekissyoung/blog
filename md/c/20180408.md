# Unix文件系统的内部结构
- 第一层抽象 : 磁盘到分区
    - 一个磁盘可以存储大量数据，可以划分成多个独立的区域，称为分区，每个分区都可以看作是一个独立的磁盘
- 第二层抽象 : 磁盘到块序列
    - 磁盘物理上是磁性盘片，盘片表明是同心圆，称为磁道，每个磁道又被划分为固定大小(比如 512字节 )的扇区，从 0 开始对所有的扇区编号: 0 1 2 3 4 ... , 编号完成后，磁盘逻辑上的存储就是一个在 固定大小 ，序号有限，连续的存储空间上 写入数据。
- 第三层抽象 : 块序列 到 三个存储区域的划分
    - 一个被编号完的 磁盘块序列 在linux会被划分为 三个区域
    - `超级块区域` : 第一个块区域，存储文件系统本身的结构信息，例如每个区域的大小，未被使用的磁盘块
    - `i- 节点表区域` : `i-节点表`是一个列表，每条记录就是一个文件，记录结构: 文件属性 文件大小 文件最近修改时间
    - `数据区域` : 文件实际内容的保存区域

- 既然文件实际内容 和 文件属性信息是分开放的，那么新建一个文件，实际进行的操作如下
    - 存储文件信息: 内核先在`i-节点表区域`找到一个未被使用的`i-node`节点(比如节点号为 47 的节点),内核把文件属性写入该节点
    - 存储文件内容: 把文件内容存入`数据区域`，记录下 `起始块` 和 `结束块` 编号, 比如 文件大小 1500 字节， 那么将占用 3 个块( 512 字节一个块 ), 存储还不要求是连续的，比如就存在 `200` `780` `1006` 三个块中 
    - 记录文件存储块号: 内核在 47 号节点的磁盘分布区，依次记录下 `200` `780` `1006`
    - 添加文件名到目录: 内核将 `文件入口( 节点号 47 , 文件名 )` 这个信息添加到目录文件中