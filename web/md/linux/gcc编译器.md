# gcc处理流程
源文件 --(预处理)--> 预处理文件 --(编译)-->汇编文件--(汇编)-->目标文件--(链接)-->可执行文件
```shell
gcc -E hello.c -o hello.i # 预处理 中间文件*.i
gcc -S hello.i -o hello.s # 汇编语言文件*.s
gcc -c hello.s -o hello.o # 汇编 目标文件*.o
gcc hello.c -o hello # 直接将hello.c 编译成 hello程序
```

# 编译器警告设置
```shell
-Wall # 启用所有警告信息
-Werror # 在发生警告时取消编译操作，即将警告看作是错误
-w # 禁用所有警告信息
```

# 支持gdb调试
```shell
-g
```

# 编译优化
```shell
-O # 进行基本的优化，这些优化在大多数情况下都会使程序执行得更快
-O2 # 完成-O1级别的优化外，还处理器指令调度等，这是GNU软件的默认优化级别
-O3 # 除了完成-O2级别的优化外，还进行循环的展开以及其他一些与处理器特性相关的优化工作
-finline-functions # 允许编译器将一些简单的函数在其调用处展开
-funswitch-loops # 将循环体中值不改变的变量移到循环体外
```

# 其他
```shell
-I # 指定include包含文件的搜索目录
```

# 链接原理
一个或多个可重定位目标文件*.o ---(链接)--->一个完整的，可加载的，可执行的目标文件
- 可重定位目标文件 *.o
> 编译成的机器指令和数据，因为它往往引用了其他目标文件中的符号，所以不能单独直接执行，需要将这些引用所在的文件链接进来，这种操作称为重定向
- 可执行目标文件
> 已经将所有引用到的符号的所在文件链接起来，每一个符号都已经得到了解析和重定位，每个符号都是已知的，所以可以被机器直接执行
- 共享目标文件 *.so
> 特殊的*.o文件，程序运行时候才动态加载到内存中运行

```shell
ld add.o main.o -o app
```
ld 就是gcc使用到的链接器，命令里ld可以替换成gcc

### 库
- 包含通用函数的数据和二进制可执行机器码的文件

#### 静态库

#### 动态库
- 程序启动时被装载
- windows 下是.DLL文件
- linux 下是.so文件

#### gcc 工具链
ar , as ,ld ,nm ,objcopy ,ranlib ,readelf ,size ,strings , strip
